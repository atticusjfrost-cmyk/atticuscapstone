<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Attention</title>
  <style>
    body {
      font-family: 'Courier New', monospace;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    #display {
      min-height: 300px;
      padding: 30px;
      background-color: #2a2a2a;
      border-radius: 8px;
      font-size: 18px;
      line-height: 1.8;
      white-space: pre-wrap;
    }

    #nextButton {
      display: none;
      margin: 30px auto;
      padding: 15px 40px;
      font-size: 18px;
      font-family: 'Courier New', monospace;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    #nextButton:hover {
      background-color: #357abd;
    }

    #nextButton.show {
      display: block;
    }

    .flash {
      animation: flashRed 0.5s;
    }

    @keyframes flashRed {
      0%, 100% { background-color: #1a1a1a; }
      50% { background-color: #ff000000; }
    }

    #errorImage {
      display: none;
      position: fixed;
      top: 53%;
      left: 50%;
      transform: translate(-50%, -50%);
      max-width: 90%;
      max-height: 90%;
      z-index: 1000;
    }

    #errorImage.show {
      display: block;
    }

    #dramaticText {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      font-weight: bold;
      color: #ff4c4c;
      text-align: center;
      z-index: 2000;
      animation: shake 0.5s infinite;
      white-space: pre-wrap;
    }

    @keyframes shake {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      25% { transform: translate(-50%, -50%) rotate(1deg); }
      50% { transform: translate(-50%, -50%) rotate(-1deg); }
      75% { transform: translate(-50%, -50%) rotate(1deg); }
      100% { transform: translate(-50%, -50%) rotate(0deg); }
    }

    #dialogue {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      z-index: 2001;
      white-space: pre-wrap;
    }

    .whiteText {
      color: white;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
            font-style: bold;
            font-size: 50px;

    }

    .redText {
      color: #880808;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
            font-style: bold;
            font-size: 50px;

    }
  </style>
</head>
<body>
  <div id="display"></div>
  <div id="dramaticText">No! It didn't go like this. How did it go?...</div>
  <div id="dialogue"></div>
  <button id="nextButton">Next Memory</button>

  <audio id="errorSound" src="errorbox.mp3"></audio>

  <script>
    const text = `I stand outside in my hand-me-down clothes, paint splatters on my pants and shirt. The sun is big and mean, and it streams on down through the sheets that have been hung to dry, creating a soft white glow if one were to stand behind it.I lift a heavy board of wood up to my door frame and rest it on the threshold of the doorway. My eyes peer upwards. This won't fit; I tell myself.`;

    const SPEED = 50;
    const words = text.split(/(\s+)/);
    let currentIndex = 0;

    const display = document.getElementById('display');
    const nextButton = document.getElementById('nextButton');
    const errorImage = document.getElementById('errorImage');
    const errorSound = document.getElementById('errorSound');
    const dramaticText = document.getElementById('dramaticText');
    const dialogue = document.getElementById('dialogue');

    function displayNextWord() {
      if (currentIndex < words.length) {
        display.textContent += words[currentIndex];
        currentIndex++;
      } else {
        clearInterval(intervalId);
        nextButton.classList.add('show');
      }
    }

    const intervalId = setInterval(displayNextWord, SPEED);

    nextButton.addEventListener('click', () => {
      document.body.classList.add('flash');
      display.textContent = '';
      dramaticText.style.display = 'block';
      nextButton.style.display = 'none';

      setTimeout(() => {
        errorImage.classList.add('show');
        errorSound.play();
      }, 250);

      setTimeout(() => {
        document.body.classList.remove('flash');
      }, 500);

      // Start dialogue sequence
      setTimeout(() => {
        dramaticText.style.display = 'none';
        showDialogue("It's just a matter of paying attention.", "white");
      }, 2000);
      
      setTimeout(() => showDialogue("What?", "red"), 4000);
      setTimeout(() => showDialogue("It's just a matter of paying attention.", "white"), 6500);
      setTimeout(() => showDialogue("I have been. The memory file must be wrong. None of these are how it happened.", "red"), 8000);
      setTimeout(() => showDialogue("You just aren't paying enough attention.", "white"), 11000);
      setTimeout(() => showDialogue("...to what?", "red"), 14000);
      setTimeout(() => showDialogue("To the parts that don't fit.", "white"), 17000);
      setTimeout(() => showDialogue("The text you picked as your jogger for your memories, what was it?", "white"), 20000);
      setTimeout(() => showDialogue("The Tempest.", "red"), 23000);
      setTimeout(() => showDialogue("And why did you pick The Tempest?", "white"), 26000);
      setTimeout(() => showDialogue("I'mâ€¦ not sure.", "red"), 30000);
      setTimeout(() => showDialogue("I know why. You see, you need a story about change.", "white"), 32000);
      setTimeout(() => showDialogue ("Where an old and bitter king could forgive his enemies,", "white"), 35000);
      setTimeout(() => showDialogue ("where a wizard could break his staff and drown his books and leave his island.", "white"), 37000);
      setTimeout(() => showDialogue ("You needed a story where the illusion would run dry and all that's left to do is change.", "white"), 39000);
      setTimeout(() => showDialogue("Because change is a horse we all must ride.", "white"), 41000);
      setTimeout(() => showDialogue("Oh... OK.", "red"), 45000);
      
      setTimeout(() => {
        window.location.href = 'autumnjogger.html';
      }, 52000);
    });

    function showDialogue(text, color) {
      dialogue.textContent = text;
      dialogue.className = '';
      dialogue.classList.add('whiteText');
      if (color === 'red') {
        dialogue.classList.remove('whiteText');
        dialogue.classList.add('redText');
      }
      dialogue.style.display = 'block';
    }

    errorImage.addEventListener('click', () => {
      errorSound.play();
    });
  </script>
</body>
</html>
